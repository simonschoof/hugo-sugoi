{{ $refNumber := .Get 0 }}
{{ $author := .Get 1 }}
{{ $text := .Get 2 }}
{{ $refName := .Get 3 }}
{{ $references := .Page.Params.references }}
{{ $reference := (index (where $references "name" $refName) 0) }}

<span id="ref-{{ $refNumber }}">[{{ $refNumber }}]</span>{{ if $author }}: {{ $author }}{{ end }}{{ if $text }}, "{{ $text }}"{{ end }}{{ if $reference }}. <a href="{{ $reference.url }}">{{ $reference.url }}</a>{{ end }}